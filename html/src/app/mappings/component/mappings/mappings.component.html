<div class="mx-auto mt-5 ">
    <app-collapse [name]="'i18n.mappingPage.filters'">
        <form [formGroup]="getForm()" (submit)="onSearch()">
            <div class="row">
                <div class="col-md-6 col-lg-4 form-group">
                  <label class="ms-sm-2" for="pattern">{{ 'i18n.mappingPage.filters.pattern' | translate }}</label>
                  <div class="input-group mb-2">
                      <input type="text" id="pattern" class="form-control" formControlName="pattern" maxlength="250"/>
                  </div>
                </div>
    
                <div class="col-md-6 col-lg-4 form-group">
                    <label class="ms-sm-2" for="position">{{ 'i18n.mappingPage.filters.position' | translate }}</label>
                    <div class="input-group mb-2">
                        <input type="text" id="position" class="form-control" formControlName="position" maxlength="2"/>
                    </div>
                </div>

                <div class="col-md-6 col-lg-4 form-group">
                    <label class="ms-sm-2" for="authorities">{{ 'i18n.mappingPage.filters.authorities' | translate}}</label>
                    <ng-select [multiple]="true" [closeOnSelect]="false" appendTo="body" [hideSelected]="true" [items]="data?.authorities" bindLabel="name"
                        formControlName="authorities" placeholder="{{ 'combo.select' | translate }}">
                    </ng-select>
                </div>
              </div>
              <div class="row">
                <div class="col-12 text-end">
                    <button type="reset" class="btn btn-nc btn-outline-primary">
                        <fa-icon class="ms-1" icon="times"></fa-icon>
                        {{'button.clear' | translate}}
                    </button>   
                    <button type="submit" class="btn btn-nc btn-outline-primary ms-1"  [disabled]="getForm().invalid">
                        <fa-icon class="ms-1" icon="search"></fa-icon>
                        {{'button.search' | translate}}
                    </button>   
                </div>
              </div>
        
        </form>
    </app-collapse>

    <app-collapse [name]="'i18n.mappingPage.records'">
        <app-table *ngIf="data !== undefined"
            [page]="page"
            [columns] = "getColumnModel()"
            [buttons] = "getButtons()"
            [treeFromRelation]="'parent'"
            [treeToRelation]="'me'"
            [pageChanged]="getPageChanged()"
            (changed)="onSearch()">
        </app-table>
    </app-collapse>
</div>